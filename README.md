## Architecture Diagram
### PipeLine-Diagram
![Alt text](https://lh3.googleusercontent.com/fife/ALs6j_HhM-24YwyVP99k-moUEiNqQWSpqRh4BH6x2yOaZ83lFG3kN8AEHWj4uA-aZdd0FKmk2ImONcx2N8is5AtCWMuvKmqNVNDl48LxQBYRhPcvLRpyvEHZIKwFN9h6i3xXtneHZjR_CXVu2IObuBJv57QqZxMhhjOdfKF7eZxT8WkG3KqV1QtPfAb-s6IR6W2YsJw2mVUH3P5x6oIh0n2XcHeeZfe0-76i3hb_blNXL7FPa7oL5a9c4vHdz34K7jkxE813mWxwHKctRGU8WEoW9TPGu5lH8m46QUYwIol3FEt-sJfr2yJqTRKuv_pzfY5ZiJBCDr74JoFEkSoWGYtcH73liES7CFdNnkDba7DVZ0pVdv2sl_4tHjV5S9DqXZMKMYYF5lfsAcRPmgYgNc50rtaLs0HCk5y_-l4PxE147jho6PIugOOZIgLgBbZE-fs-2RLzz2c_7N-1Ycop4MwcHDq5L3jsIEntunzoUapqLch401o1LgFzcnE_YdG8a0jH5PPtBLiks6uFezQqHAeDMb7KdEC1T5Grqjk2yCiFWNIWF7ALAYghkBZqQnwm84TiIB8UesZofeoisdIyAcADeigj9VSnSWDx9Tryk2jrV_w0Da83Hh55Libf2anxog36DQtwRcLhpvcTyj6cqy9AyRjE1w4svNh0xY7gH1fuaWlofO7hpP7ZV9B1Qo9btNPxRtuMz_i-VOzB7ak9am5GYeoRXyNQgBNDfH6hWsHvL2js2nVEE6b2bJk-KoGqj2mEPGAKRR3MC75thC7Oa6M89UTo9Vwlgz4xcoumfGY4Bm7J-R0Krl6ZRwqLNiywavB_LFb9AngScAborJnZeQ8ykgrzwtVUfjSK8rhNQkYGcHqv-QSduclixiMfON_55Nilhi1B5pnRyCIh3U8hwXec3nIB_02eYb67Bhkj252uk1VEibwGsKN_s63FN2vQY_Aga0DNNb7uDUYI0yFcc7wIzsvxMm5DfzkToVU6ZTD2LSCe70MmC7iyBc__Mmp1tDuB-rbDJFl37O0jJINo8_lD2sL3q7doI1rBwPmTvibCPnJnkrS1IjxuX4X5-VE5yFODKe3UwN7AFJ-BOYSFP1B8Wm4QZOUmC1ECxm5cwE4VPTidjiJe9D-yfXqzRQq_dbzIrU47L-Et7PC_xVa8pqs6SmcVjLEo4N8hgRf6nK8zAuuU5YzAEKgFY7u9jF6HEyu029cXO8yqXBHRfiEVRf8g_UT0be1aKAKQ2NDvziYFeyWH3DOuMBtaFj8Pr_DPvZTNOjMg3Z8_aOCNaTMmy0IunLlx5QulQYcQoPvEXPjZ3nObHUnBRJyYAOwQfTArVZSriHv6uGQziQC2fH7i8bunZghi712tlr5Y07IuIU79o24pbiDPJszlxnCIXFKZyAOcJQxKtPBGCGX4SFFmpoIj2hp0nJiFPSMl0gevSySaaaE0PLFUWmYQriyqBczTp9K8IVgqMbW5yWsAtRi4HTAFBWeq4ksKxBWYULl0kMEt0yL1aOITjUmZwhwIpd82C_1yWMm9a9KMcCgI2nsrNZMpU7GLRo3vdRFOlWbj9u92Rrl1z8-sRy1u_22MOeXbA8JLuxMiY-BFCg=w3024-h1646)

### 전체 시퀀스 다이어그램
![Alt text](https://lh3.googleusercontent.com/fife/ALs6j_HxhqXUymacijY7FUznCPTsvth11MvsA1rjv7HFNwc6XtWxbeidzbUlSiY0v3DInaH4G8rS025JX8DObEDCq2xYJD3SrNukf7UoqeBmddNqk72ykXPSfcI5OlzjHIi758avrlzCH7SmGwls6uauqemznB5FR2-m58hC69b9U8Rnr-c4TKhxLWHbNgfrgIh5VVQW5g_2xi1qb1y5xmvUT6o5oxTMaBgT54NNJWSBXR_frsCblhPmpRBVHz7Tkbnx0C8DFr3QFmNIWNn3P92Ke87ejNPez8-xkZJ1cXMbguk_7KmEUeHW3P53dwxIUB3lUJRBfPWNlhMYF0EHp57L1aZGqZBqtX46SAhg2YoFWZF_5YYToCPFtA_23Gjrz4LTc-9OHDicupi1k2z88BuBB26rHkSHN7bKGAJFeh4kJdbPWeccRzW2iJGkmzkFxqRQ2BE-wQJoUMae3PKNhoNzTLg5tH8DxcG0lLxpYCSL_WeVPaSaOSWoKhXXlKepMgu3OHDU42MZHQm4sXIprTFvRB2yIA--ho-0wywVpkSLG47gJUm3APyQfeO1T42-k66IbXaErFnIpCBbkQvdjalZBTSbMAzr9SOGxjHPorkrfuVkHuJ8nsEcOwtIj-AtiLzcMBpo7GO0m_pvtbySjzCnA2vNkp_Xo53_8EZS5_qMxQAXsY3RJhYo0R-IkK1fSexH20TQnxZeuOBYLYGePWR5uVgo-OsQ_nkSrwwRPYPxHv96FcoMUrudsscnx7nwNjUe_t_nFZ2AO8YoRWkS368MJg3veyerYzMUTNHcTNd0JpIUfX86zn40oHHKMI28L74SEi1NljZZhrBBZALdBF6PlsPadI6brcOa_AJUjfUkbgC_t46kxAyL0WlmZ164d68Upf2ApM-gRuoQiv6ex51GYEEVSIBeca2cYDyW8FiTLPHKCrbps7ADf8EnIm6rkEdZBfsCrZaKvs-y_e8OMAh66puswTPpv4FcAVy2T93fMlzky-cgDTZ-pFug9kRPrFhxci5mc1X7_GuTdDZ5LLolQp5TXuVlp1OMkKq2JlqRMPj6HQND14LgnIWSc-tlZ8S0IwoKw2LXF0b2LtX1-E_HE0QD2d4RO3JKtEzv7NtrAitdMSpfAsMLMUXOYATkO22XWk65MzvBHjx61qJTq82x2gU9ZN3To49x1cDgXpD1viGtVoJvGtrUam7kJWN7kQjt8Amyar-oUWmudRJrND8EMHHQYog4BnekApXH0_MPFmLRJSFrAsoF2RCl_0Tg487NTMwXDQ0v83RoaX36cI1e4qHjWET4ltKqgpk816fxJEP9gQ8mkayixwmw8PmEwfvHCJv3yIiquLDTr8_iOjoSbqDNGx1yWrtrwAkjEvKooycFM8uIPBc5G0m8H7Y-EDJkFkSqbzwNVTAXul_HNHaS2ay4g4xjxDhqotK7hfC0cuvI1RM_6rGZwLp3scGpnSQ2OC7NkEl23O_GGGo_kjOqfJ7ba2Ubj4v57wHWuuvCO0k8oR-51Peb8G9CAmryxmTyHZcMFKs-4W-Yy6qgvfI2TF9VdbMUGPjtZU4Yhqf3OEZRxhE_S_5Zp7s_l5JuYTA3nXwycD2FeQ=w3024-h1646)

### 재고조회 시퀀스 다이어그램
![재고](https://lh3.googleusercontent.com/fife/ALs6j_GzJq57FwZh2a-IzMzn9cfko3P3OlkOFhG4o3Zg_uSshIwUBqc9hfE3FPUCbaWZ5u0iVPv-OYCo7UlAc_Yw3li-y20mBnVYkN9Nu6dbqZkS25LpKNRrqx9Taj30kHQRPYdOyV2S323t62z8Ba3K3DXLwxg3NUAEHdq9wO9mqjP67bz1JAjfU5s-pT5pOtabaXT0uaO3D0lj6T1Qpcmzho74BHxVhPkdAaWQGgsULInQIhxLzi1VNwPOVDKXYB7grFZacACa_U5uldZyKpw5_u50869Q-fhXLUwsfMxqfZUVKjN6whee4CRWBq13PxiiNFobCvLL_w_1OxP-PDvItYJT-8r7CUlsewF70NVXUcZ6hBidKsjcl1L5_-Gi5qnhsBiHBCXJ0qEqDRNIfjLtl0paRG-8e1GlfCL-1OneNZulrw994SHeV6sDCt2uvIuyXRcuzsEgKE0OKjd_1EdNOEgzxolJGHv19RSBPNFgAnw2SXnNZkwONPBVEBxC9vNd_HxUxO9i_sHFfbHHOd0qnmA-tIm_R8irfGvEWXLEJljy4LYkAMUw1b0rbOqfhGLy8R9e6pR6JF3ciXHmOBeSfR59UnPo_BVpeRCBnajgAQ5ckguuTpq16ecs4E8HSWn-3kzxA6UJMtnlapZvgxkOPP17Car1jkI3xC-6HLEG_zZhrOw9XxfUtJGc19vGxXaDevWMVSMxsPKilIXgVTsO8eYscS10loNutuT4sHRoVbP7pQ5xjKopohxq83gVKUHCnGtkWQrBEt3oBSnE4gDtXL3zCUvoadyd56ChWI1T0VNVYIGaApAWg3q_jcVMXyqJGelOx8yBqLSjoeGw46JUhz_nt4Frth2b-UHLO8_Mp29wHVZeJRcvuDpLcmI8ASvpmYENDwY6-3GTgW66FBr0aubNcaJ6BGa8YPw1yskseKUkSi6igqpAHJQm7VIkVHO0bV0Dbg7G6_QtOPV6oEcaNlnBmqMjE0sccViNqh6_vTgSbIMw_LGiMopYntOBL690r-2Kz6qx6N8Ef12h5rKnAb3cxMJAy2IudYETBhMnP8FQZNwZCqBAOKiWpKwLiYD95ghnQnwLPbF1D_8ZXS4NtMEXXXGiHgv_xpsS54JSuFwWPmktSaL28q0gKqckc5pj9ZrKy82pVM0lxg3905VdRp6uppyt03G2e_Th25-mvoKYYx7uZcaR4YrMTitrkHTZkoybkgpyQE2zR4RReSQc6EUEAnqFpJKkldODy7OYDSY1XrkQRofo6Wx_KTG99yEuQkI7ow8DwgiwThkO6onw0shdQ_ojEes50gOFTyPiAv1YcEJrR702rP7Uuxdb2pkptb9HhzGJwZfMDKLH-SufbRBlxmbaCCIqUu38mGDkpR3ged0VGUq0GLCw_SI1GpfFIDK3oBAeCMViRn1fw2Pa6x9F7v0-NjviNV6ow5BU5r27DkUbLZr1XtU04kJ_jLwGKB-CJtwCL8nOUbQgqko8bH9affIAtjxzabx-5j79sVcITLFue4zHuL2twv3O5BTl_xqEiAiWJsfp_xpd8gX_8eZ3mKREf7gh4J27-VgrafjafnfoZ9nt-lhrC-9q6XfN8erT5BD0=w3024-h1646)

### 입고 시퀀스 다이어그램
![입고](https://lh3.googleusercontent.com/fife/ALs6j_EPe5inBJZjTpAZfPTP2aE_SBROr-fiBNjSgV8y1Ltgq3je3lStaJqCR_BQyXJrLU6e17gBE1n6oOL6z923PbvG2bsKpOLrvQxMIzwWzn96CuiyQqX5CxCrXIphpz3K0HtFpVszEXG9jgunhvPSPWZ70B5TVeh4ITb4d_R2WTCsQO-7Q2iaMKZhQ89hHuYxjg2oRe-JxkpO3vGm7HFfAXWbMPXD7PGLJquF3tQbGerD1G7IQ4tbtvMpPmXyUYE3SAPR2XZ0M5Bb7sPT5buWQY_4ayJKIzINxal16QhqaMaiFflobhMCQkdz-3saiuVr8mLp1mtwIkrLOP-0Iu3lX_ESq1IieuFlWfcVPxHKU9IBoAafZc4LIKeETLn8dggvQS08qV327lW00fmvOVNNbEKTFXA4wAwTLUXwHs0jjEyy5Cj5TNs5CPGSogNWJEwxpxzibBM45o7_7znoMzO8E03JiqSV8Yv1m3bFg6c5VDZiXJVYwl-p-HtoQBalBMPXzMWcEZFhBrJE55mtl5lCkxMfxdeuVsjOCstFArCumby5ZS8DPEmGU8L16_ey991zw_IPwC234QKhY2JgAi9HAG3veH5SZny5bt2KZ68wvfMjZrbVLvhRS1UNMDDMZA3kDMPwcJfjYB-MirpyIXwxwg0-J_4y3J9-hjiGUv7DJq8Wckv-XzoAV0PIOe_IoHTug-LpR74l5AmmcxtX8Jks_Btdnpewx1oVa75PFa3dUQ2O1Tn0JOwQucvG8Rht1UhWt-vElTwWtDchOuRNX65KGU02A4JkGUfvgx6ckxx-4UyuHyVpqNOgEM2eKPXxEiI-Jn2wPIUUg0wbYqRVoprTPjIeS7e9BjQ9FpdRQck5KXI7PxMvHVrNcz8T9mLfZ6nTsJ-7BMH5q_Yh2hV7IL97KX5fqqb-nCk_2qELoLmXdchwaHG_EcY7Ym6cUFXXFdr77Iqp6adLMhbWXuonWzk1YsZS4WZ8e7mKkl79ejFq2rm4OZElf_xUXGWwS73JL_XPjcvhBLIjlLFR-fvtbUm6_-k2MN3ij1hZfNb8F3tNvpELhqDQpyGPwQ8RMGsx4VCAOzMchWYtXiDTjDvdKclt9SanQ83ef0m7re5mgLcRUJGGQhNnjqtrZc2vMkZjpCYpE9iwhktZBSD02Af8uCatzq2b_rmFG5gA9B7XtCZUHDpo8iY-Gua5wgtIehjPdvyQqxC0JNEIoOAa7OUFfMWCjrdum7orcPSqiDpw6v8DKHp-QpCfPUQ_EgDD9d2F5VbAITo9FooD1QBHx1GPOKhF8Jwcw0TcG1i6D9d9smpOpUUK9U-UlrhvETS7GFAA9Hs0Zaa2IKM7rTxE2474t0OIoSwgx_sfkKhpXSIWbeOB_IFdG7e1xvlsnb4CMiW-azki9vuQGWTU0SBm-scZBdBTWkmeBreRe_uDEEjfV5s2oueP-WmrPU8gkSaYa9VtipzjQf4JwoFrHo8T5I-zcGth7uTaam-zHI3XSCH-KaZ36GLLBPMOVZq2bUa4TxXs3gto7bcea_QI_U386JZCUIdDsYVyYUaPFjJ7C9R22C7PYg01ozM-lseMOjBq4g4Yk3yYvoDBbvsNDg=w3024-h1646)

### 주문 시퀀스 다이어그램
![주문](https://lh3.googleusercontent.com/fife/ALs6j_Gfi6mJTimp-1XJoJ6N03ixqe9OvHDr2C_cpfR35x9uRE_01Kq276gQpDfQqRfAV2sfsoyK_DbZ-R4MP9oFEaDk8SE_gJ5GqHiJ17622urmg0zB_1d5FmEuECDsZYp_PSnKw7Udg8s3JiyaDjAWKI9FwlRm1sQcE2fBhj9b9q15sc1hf7Z3mceOYkS5-6sSmVCmTXLeBoLZkSYYx3TKulW0l557D_yk_UEswrJgDF9pKgMW0gLHvsPrsTKWFzcHNYIf95zcviqhP4d7o62jeh1GmPj1EBHUf-F7SW1nsqnn5-L6sRaFSd-Spf2jA82JJ2o90zhEa2vmPPcjPjPKn-NINkZknNhlWqTpy-9u1YUhmtvaW_b3A0uZzNywN_tcqII0erwAPChiS7M1qOq3nq1puxv8htZugq9xA-ZG14KeUdSNsLqA2qLntU8gwXwUKQrtFukbf51B88uBLnlHUEe8hVucWhCbWj-lC87OiPlI36jAQfcOKRU4_qpR8INz0NcQsMVHm77gj4EZH33zKgvY4LOdz_6b5CshIxYKc0OqVpUY7vbAGvtlUHh6qsSm03OYmD2xGpThzB9y6Ex6IuSv84tWzJqSTS7phtUNB9wOttTP-sKbYoullk7_SmwEYrauGgl9iTf-aYPRcoN5f6vQ0VOIC2kfTQjkG2q42DSneTjUyqn552vvIvVvGR2IgnebDsLaQgvwewWQT4CN1Mu0Z4evOcyj0I92EE-uL1kfcM9Sl5HhV5advZrYR_u7yV4ft9QVggSaDO4Cxy8ZTijdTFEZslCeSlzGkKs9IhQ5cd4mHOcv-ET3GracQp6rhsdIJ1dxvrIsFsDo-p5sOGNKF23-UNS7nrF5c2W--chUodI9vLO5_cKXMmIWgz1rlM6kzFkOWoR3pHOYWMoyiwoeWgwylDjaQhT0QlJpLFqHETXC8pr75ag-zM2olCVDp-CDyWgMQ_vdLA5RkzJCq_Vu1O7sOnGWIWsmOqzYwMtjQKIaqtDoVcGHtG52VsfhgP-nmmGvalM5mpi6MkcjTox3ayEDxEyh2ZCGgdqxSmfScWsWEX3tcTWFblZ1uxefsoE5Xyg_VPE_UVWakshDGgjOgJjFdA0EDYcp5BtTHkOHcd8W01_tsQ0OKGZfBOUIr2h6bwDp4zmJSQ4KGZXTRfKu1eU2fDyFMXGLtqVfPM-SZc6YIsUpbedLLF9O4y_fa__eh7qNgBuPv67JRP1hdDJbDNB4yH_k5S7STXsBzDFF1hAEUS8eJ8j6KPdboZR6SpiJP7_szlhm7tmYHNm0kdugw6Bk5P-xjiY4CLk2q7dXNnLcwPneDLjdKa4CaBcwxE7j5zA-JGJKCY2hxR49uEDBJn7GKq7LKIEy9rSQV0jQTz-qII9cIU2aYb-N1h2nVHEFg_Dtcj_p3BjMghHmjh7Wlmnf74Re1rREYXhqjiw6tRr08icnMtF2wouSM9PyGDAn98Mv-5G2m8B52V-LCVb3M8oBe4FPYEVFJuPtWi3R7wO6RqPddL_XLUe9mKj5bM3y0Bttm25KcPuoa16-NyjZHvkOgAfzFmLBvJ2p9hHceJc13r6_6lPjKr7R43FnHoR4s33WBA=w3024-h1646)

# 아키텍처 설계 문서

## 개요 (Overview)
본 아키텍처는 초고 트래픽(초당 수백만 TPS)에 대응하기 위한 재고 조회/주문/입고 시스템을 설계한 것이다. 이벤트성 상품(예: 갤럭시 이벤트)으로 재고 조회 요청이 폭증할 때, 재고 상태를 효과적으로 관리하고 빠른 응답을 제공하기 위해 NoSQL 및 캐시, 이벤트 기반 구조를 활용한다.

## 목표 (Goals)
- **초고속 재고 조회 처리**: 재고 조회 API 요청에 대해 마이크로초~밀리초 단위 응답을 제공.
- **유연한 확장성(Scalability)**: 트래픽 증가에 따라 무중단으로 수평 확장 가능한 구조.
- **고가용성(High Availability)**: 장애 발생 시에도 서비스를 지속적으로 제공할 수 있는 구조.
- **데이터 정합성(Consistency) 유지**: 주문/입고 시점에 재고량 정확성 보장.

## 요구사항 (Requirements)
- 초당 5,000,000 건 이상의 재고 조회 요청 처리.
- 특정 이벤트 상품에 대한 조회 폭증 시에도 안정적인 응답 시간 유지.
- 주문 처리 시 재고가 부족하면 에러 반환.
- 입고 처리 시 재고 수량 증가 반영.
- 외부 시스템(배송, 결제 등)과의 비동기 연동

1. **API 레이어**:
    - API Gateway를 통해 재고 조회(API), 주문 처리(API), 입고(API)를 라우팅.
   
2. **데이터 레이어 (NoSQL + 캐시)**:
    - **NoSQL**: 재고 상태를 Key-Value 또는 Wide-Column 형태로 관리.
    - **캐시(Redis/Memcached)**: 초고속 조회를 위한 인메모리 캐싱. 특정 "핫아이템"만 캐시해 비용 및 메모리 사용 최적화.
    - **RDB(샤딩된 클러스터)**: 주문 영구 저장 및 SKU/Vendor_Item 메타데이터 관리.

3. **이벤트 기반 처리 레이어**:
    - 메시지 브로커(Kafka 또는 RabbitMQ)를 통한 비동기 이벤트 처리.
    - 주문 이벤트 발행 후, 재고 서비스 또는 주문 서비스가 이벤트를 구독해 상태 변경.
    - 외부 시스템 통지 및 Saga(필요 시) 패턴으로 확장 가능.

## 기술 선택 근거 (Technology Choices)

### NoSQL 선택 이유 (Cassandra 또는 MongoDB)
- **Cassandra**:
    - 선형적 스케일 아웃(노드를 추가하면 읽기/쓰기 처리량이 선형적으로 증가)
    - 높은 쓰기 성능과 빠른 읽기 응답
    - Masterless 아키텍처로 노드 장애 발생 시에도 자동 페일오버 및 높은 가용성
    - 파티션 키를 통한 균등한 부하 분산

- **MongoDB**:
    - Document 지향 모델로 유연한 스키마 관리
    - Sharding 기능을 통해 수평 확장 가능
    - 풍부한 Secondary Index 지원(단, 인덱스 관리 비용 고려)
    - 범용적인 데이터 모델링이 유리할 경우 선택

**결정 포인트:**
- 재고 조회/차감과 같이 단순 Key 기반 접근 및 선형적 확장성이 중요한 경우 Cassandra를 선호
- SKU나 Vendor_item에 대한 다양한 질의 패턴, 문서 형태 저장이 유용하다면 MongoDB 고려
- 본 아키텍처는 **단순 키 기반 조회(fulfillment_center_id:sku_id)로 재고 접근**하므로 Cassandra를 추천 
- Cassandra는 TPS 증가 시 노드를 추가해 성능을 거의 선형적으로 올릴 수 있고, 쓰기/읽기 모두 짧은 레이턴시를 제공함

### 메시지 브로커 (Kafka 또는 RabbitMQ)
- Kafka: 고성능, 파티션 기반 확장, 주문 이벤트와 같은 대량 이벤트 처리에 적합
- RabbitMQ: 메시지 라우팅 플렉서블, 다양한 프로토콜 지원, 소규모 이벤트 처리에도 용이

**결정 포인트:**
- 대용량 스트림성 이벤트와 확장성 중시 → Kafka
- 복잡한 라우팅, 다양한 패턴 지원 필요 → RabbitMQ


## 읽기/쓰기 TPS 증가 시 고려사항

### 읽기 TPS 증가 (재고 조회)
- 캐시 에 해당하는 재고를 Redis 에 상주시켜 마이크로초 단위 응답
- NoSQL 파티션 키 설계로 특정 노드에 과부하가 가지 않도록 분산
- 읽기 TPS 5,000,000에서 Cassandra 클러스터 노드 수를 수십 대까지 확장 가능 (실제 노드 수는 HW 스펙에 따라 상이)
- Redis 클러스터링 및 샤딩으로 In-memory 캐시 확장

### 쓰기 TPS 증가 (주문/입고)
- 쓰기 부하 증가 시 Cassandra의 선형적 스케일링 활용: 노드 추가로 Write TPS 확장
- Cassandra는 수만~수십만 TPS 수준의 쓰기에도 노드 증설로 대응 가능
- MongoDB 샤딩 시 각 샤드에 쓰기 부하를 분산, 샤드 추가로 수평 확장
- 이벤트 버스(Kafka) 파티션 증가로 주문 이벤트 처리량 증가
- Inbound 및 Order Command 처리량 증가 시 마이크로서비스 인스턴스 수 확대(Auto scaling)로 대응

### 가용성과 동시성
- Cassandra: 노드 n개 중 Replication Factor 에 따라 노드 장애에도 읽기/쓰기가 가능한 Eventual Consistency 기반. 가용성 99.99% 이상 확보 가능
- Redis Cluster: 리더-팔로워 구조를 통한 자동 fail-Over, M 가용성을 위한 다중 Replica 구성
- Kafka: Partition Replication 및 broker 장애 시 리더 전환으로 높은 가용성
- 마이크로서비스: Stateless 설계로 인스턴스 장애 시 LB+Auto Scaling 을 통해 무중단 서비스

**수치 예시**(가정):
- Cassandra 노드 10대 구성 시 초당 수백만 건 읽기 + 수십만 건 쓰기 처리 가능 (하드웨어 스펙 및 최적화에 따라 변동)
- Redis 샤드 5~10개, 각각 단일 샤드당 수십만 TPS 처리 가능(메모리 및 네트워크 환경에 따라 상이)
- Kafka 파티션 100개 이상으로 분할하면 수십만~수백만 TPS 이벤트 처리 가능(브로커 수 및 디스크/네트워크 스펙 고려)

## 데이터베이스 및 캐시 구조

- **재고 DB (Cassandra)**:
    - Partition Key: `fulfillment_center_id`
    - Clustering Key: `sku_id`
    - Value: 재고 수량(stock_count), 마지막 업데이트 시각 등
    - 조회/쓰기는 Key 단위 O(1)에 가까운 접근 제공

- **재고 캐시 (Redis)**:
    - Key: `fulfillment_center_id:sku_id`
    - Value: 재고 수량
    - TTL 또는 히트율 기반으로 핫아이템만 유지

- **주문 DB (Shard RDB)**:
    - 주문 데이터를 샤드 키(예: 주문 생성 시점, User ID 등)에 따라 여러 DB에 분산.
    - Shard 추가 시 수평적 확장으로 읽기/쓰기 부하 분산
